{% extends 'base.html' %}

{% block title %}SENA - Lista de Empresas{% endblock %}

{% block breadcrumb %}
<span>🏢 Lista Empresas</span>
{% endblock %}

{% block header_title %}Lista de Empresas{% endblock %}

{% block content %}
<div class="stats-section">
    <div class="stats-title">📊 Resumen General</div>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">{{ total_empresas }}</div>
            <div class="stat-label">Total Empresas Registradas</div>
        </div>
    </div>
</div>

<div class="actions" style="margin-bottom: 30px;">
    <a href="{% url 'etp_practica:crear_empresa' %}" class="btn btn-success">
        ➕ Nueva Empresa
    </a>
</div>

<div class="table-container">
    <table class="table">
        <thead>
            <tr>
                <th>🏢 Nombre</th>
                <th>📋 NIT</th>
                <th>🏙️ Ciudad</th>
                <th>📞 Teléfono</th>
                <th>📧 Email</th>
                <th>⚙️ Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for empresa in empresas %}
            <tr style="opacity: 0; animation: fadeIn 0.6s ease forwards; animation-delay: {{ forloop.counter0|add:1|floatformat:1 }}00ms;">
                <td><strong>{{ empresa.nombre }}</strong></td>
                <td>{{ empresa.nit }}</td>
                <td>{{ empresa.ciudad }}</td>
                <td>{{ empresa.telefono }}</td>
                <td>{{ empresa.email }}</td>
                <td>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <a href="{% url 'etp_practica:detalle_empresa' empresa.id %}" 
                            class="btn btn-primary" style="padding: 8px 12px; font-size: 12px;" title="Ver detalle">
                            👁️ Ver
                        </a>
                        <a href="{% url 'etp_practica:editar_empresa' empresa.id %}" 
                            class="btn btn-warning" style="padding: 8px 12px; font-size: 12px;" title="Editar">
                            ✏️ Editar
                        </a>
                        <a href="{% url 'etp_practica:aprendices_asignados' empresa.id %}" 
                            class="btn btn-success" style="padding: 8px 12px; font-size: 12px;" title="Ver aprendices">
                            👥 Aprendices
                        </a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center; padding: 40px; color: #666;">
                    <div style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;">🏢</div>
                    <div style="font-size: 18px; margin-bottom: 10px;">No hay empresas registradas</div>
                    <div style="font-size: 14px; color: #999;">Comienza agregando tu primera empresa</div>
                    <div style="margin-top: 20px;">
                        <a href="{% url 'etp_practica:crear_empresa' %}" class="btn btn-success">
                            ➕ Agregar Primera Empresa
                        </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block extra_css %}
<style>
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
{% endblock %}